(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b5790c0"],{"06c6":function(e,t,n){},"4af8":function(e,t,n){"use strict";var a=n("7a23"),i=function(e){return Object(a["w"])("data-v-4ad31a6f"),e=e(),Object(a["u"])(),e},r=["for"],s={class:"required-mark"},c=["type","name","required","pattern","placeholder","disabled","value","size"],o=i((function(){return Object(a["g"])("span",{class:"alter-mark"},null,-1)}));function u(e,t,n,i,u,p){return Object(a["t"])(),Object(a["f"])("label",{for:e.setting.inputName,class:Object(a["o"])([e.displayType])},[Object(a["g"])("span",null,Object(a["D"])(e.setting.nameDisplayed),1),Object(a["g"])("span",s,Object(a["D"])(e.setting.required?"*":""),1),Object(a["g"])("input",{type:e.setting.type,name:e.setting.inputName,required:e.setting.required,pattern:e.setting.pattern,placeholder:e.setting.placeholder,class:Object(a["o"])({"should-alert":e.setting.shouldAlert}),disabled:e.setting.disabled,onInput:t[0]||(t[0]=function(t){return e.updateValue(t,e.setting.inputName)}),onChange:t[1]||(t[1]=function(t){return e.updateValue(t,e.setting.inputName)}),value:e.initialValue,size:e.inputSize},null,42,c),o],10,r)}var p=Object(a["j"])({props:{setting:{type:Object,required:!0},initialValue:{type:String,required:!0},displayType:{type:String,required:!0}},emits:["input"],computed:{inputSize:function(){if(-1!==this.$route.path.indexOf("/checkout")){if("address"===this.setting.inputName)return 55;if("tel"===this.setting.type)return 15;if("email"===this.setting.type)return 30}return 20}},methods:{updateValue:function(e,t){this.$emit("input",{inputName:t,value:e.currentTarget.value})}}}),l=(n("5391"),n("6b0d")),d=n.n(l);const b=d()(p,[["render",u],["__scopeId","data-v-4ad31a6f"]]);t["a"]=b},"4ea3":function(e,t,n){"use strict";n("899a")},5062:function(e,t,n){},"521f":function(e,t,n){"use strict";var a=n("7a23");function i(e,t,n,i,r,s){return Object(a["t"])(),Object(a["f"])("div",{class:Object(a["o"])(["message-box",[{active:e.isActive},e.type]])},Object(a["D"])(e.message),3)}var r=Object(a["j"])({props:{isActive:{type:Boolean,required:!0},type:{type:String,required:!0},message:{type:String,required:!0}}}),s=(n("ba10"),n("6b0d")),c=n.n(s);const o=c()(r,[["render",i],["__scopeId","data-v-055f4c51"]]);t["a"]=o},5391:function(e,t,n){"use strict";n("06c6")},"7cb4":function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),i=function(e){return Object(a["w"])("data-v-117a12ed"),e=e(),Object(a["u"])(),e},r={id:"checkout-page"},s={class:"main"},c={class:"block"},o=i((function(){return Object(a["g"])("div",{class:"title"},"Orderer's Info",-1)})),u={class:"form-input-section"},p={class:"block"},l={class:"title"},d=i((function(){return Object(a["g"])("span",null,"Receiver's Info",-1)})),b={class:"form-input-section"},m={class:"block"},f=i((function(){return Object(a["g"])("div",{class:"title"},"Payment Method",-1)})),h={class:"form-input-section"},y={for:"payment-method",class:"payment-method-menu"},O=Object(a["h"])(" Pickup Method "),g=i((function(){return Object(a["g"])("option",{value:"",hidden:"",disabled:""},"Please Select One",-1)})),j=i((function(){return Object(a["g"])("option",{value:"Cash On Delivery"},"Cash on Delivery",-1)})),v=i((function(){return Object(a["g"])("option",{value:"In-store Pickup"},"In-Store Pickup",-1)})),k=i((function(){return Object(a["g"])("option",{value:"Home Delivery"},"Home Delivery",-1)})),I=[g,j,v,k],S={key:1,class:"store-link-list"},_={key:2,class:"store-to-pickup"},P={key:0,class:"submit-button-bar"},C=["disabled"],D={key:1,class:"submit-button-bar"},w=["disabled"],T=["disabled"];function M(e,t,n,i,g,j){var v=Object(a["B"])("CurrentPathBar"),k=Object(a["B"])("FormInput"),M=Object(a["B"])("MessageBox");return Object(a["t"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("div",r,[Object(a["i"])(v,{parentPageList:e.fullPathList},null,8,["parentPageList"]),Object(a["g"])("div",s,[Object(a["g"])("div",c,[o,Object(a["g"])("div",u,[Object(a["i"])(k,{setting:{inputName:"name_of_orderer",nameDisplayed:"Name",type:"text",required:!1,pattern:".+",placeholder:" ",shouldAlert:!1,disabled:!0},initialValue:e.userInfo.name,displayType:e.formInputDisplayType},null,8,["setting","initialValue","displayType"]),Object(a["i"])(k,{setting:{inputName:"phone_number_of_orderer",nameDisplayed:"Phone #",type:"tel",required:!1,pattern:".+",placeholder:" ",shouldAlert:!1,disabled:!0},initialValue:e.userInfo.phone_number,displayType:e.formInputDisplayType},null,8,["setting","initialValue","displayType"]),Object(a["i"])(k,{setting:{inputName:"email_of_order",nameDisplayed:"Email",type:"email",required:!1,pattern:".+",placeholder:" ",shouldAlert:!1,disabled:!0},initialValue:e.userInfo.email,displayType:e.formInputDisplayType},null,8,["setting","initialValue","displayType"])])]),Object(a["g"])("div",p,[Object(a["g"])("div",l,[d,Object(a["g"])("span",{class:"info-sync-button",onClick:t[0]||(t[0]=function(){return e.syncInfo&&e.syncInfo.apply(e,arguments)})}," Same as Orderer's Info ")]),Object(a["g"])("div",b,[Object(a["i"])(k,{setting:{inputName:"name_of_receiver",nameDisplayed:"Name",type:"text",required:!0,pattern:".{2,32}",placeholder:" ",shouldAlert:!1,disabled:!1},initialValue:e.receiverInfo.name,displayType:e.formInputDisplayType,onInput:t[1]||(t[1]=function(t){return e.receiverInfo.name=t.value})},null,8,["setting","initialValue","displayType"]),Object(a["i"])(k,{setting:{inputName:"phone_number_of_receiver",nameDisplayed:"Phone #",type:"tel",required:!0,pattern:"09[0-9]{8}",placeholder:"09XXXXXXXX",shouldAlert:!1,disabled:!1},initialValue:e.receiverInfo.phone_number,displayType:e.formInputDisplayType,onInput:t[2]||(t[2]=function(t){return e.receiverInfo.phone_number=t.value})},null,8,["initialValue","displayType"])])]),Object(a["g"])("div",m,[f,Object(a["g"])("div",h,[Object(a["g"])("label",y,[O,Object(a["L"])(Object(a["g"])("select",{name:"payment-method","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.paymentMethod=t}),onChange:t[4]||(t[4]=function(){return e.clearFormerSelection&&e.clearFormerSelection.apply(e,arguments)})},I,544),[[a["G"],e.paymentMethod]])]),"Home Delivery"===e.paymentMethod?(Object(a["t"])(),Object(a["d"])(k,{key:0,setting:{inputName:"address",nameDisplayed:"Address",type:"text",required:!0,pattern:".+",placeholder:" ",shouldAlert:!1,disabled:!1},initialValue:e.address,displayType:e.formInputDisplayType,onInput:t[5]||(t[5]=function(t){return e.address=t.value})},null,8,["setting","initialValue","displayType"])):Object(a["e"])("",!0),"Cash On Delivery"!==e.paymentMethod&&"In-store Pickup"!==e.paymentMethod||""!==e.pickupStoreInfo.address?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",S,[Object(a["g"])("a",{href:"#",class:"store-link",onClick:t[6]||(t[6]=function(t){return e.setStoreInfo("7-11")})},"7-11"),Object(a["g"])("a",{href:"#",class:"store-link",onClick:t[7]||(t[7]=function(t){return e.setStoreInfo("FamilyMart")})},"FamilyMart"),Object(a["g"])("a",{href:"#",class:"store-link",onClick:t[8]||(t[8]=function(t){return e.setStoreInfo("OK")})},"OK")])),"Cash On Delivery"!==e.paymentMethod&&"In-store Pickup"!==e.paymentMethod||""===this.pickupStoreInfo.address?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",_,[Object(a["i"])(k,{setting:{inputName:"store_to_pickup",nameDisplayed:"Store to pickup",type:"text",required:!1,pattern:".+",placeholder:" ",shouldAlert:!1,disabled:!0},initialValue:e.pickupStoreInfo.address,displayType:e.formInputDisplayType},null,8,["setting","initialValue","displayType"]),Object(a["g"])("span",{class:"re-choose-store-button",onClick:t[9]||(t[9]=function(t){return e.pickupStoreInfo.address=""})}," Choose Again ")]))])]),"Cash On Delivery"===e.paymentMethod?(Object(a["t"])(),Object(a["f"])("div",P,[Object(a["g"])("button",{class:"submit-button",disabled:!e.canSubmitWithoutPaying,onClick:t[10]||(t[10]=function(){return e.submit&&e.submit.apply(e,arguments)})}," Submit ",8,C)])):"In-store Pickup"===e.paymentMethod||"Home Delivery"===e.paymentMethod?(Object(a["t"])(),Object(a["f"])("div",D,[Object(a["g"])("button",{class:"submit-button",disabled:!e.canSubmitAndPay,onClick:t[11]||(t[11]=function(){return e.submit&&e.submit.apply(e,arguments)})}," Submit and Pay with Credit Card ",8,w),Object(a["g"])("button",{class:"submit-button",disabled:!e.canSubmitAndPay,onClick:t[12]||(t[12]=function(){return e.submit&&e.submit.apply(e,arguments)})}," Submit and Pay via ATM Transfer ",8,T)])):Object(a["e"])("",!0)])]),Object(a["i"])(M,{isActive:e.shouldShowMessageBox,message:e.statusResponded,type:"warning"},null,8,["isActive","message"])],64)}var x=n("1da1"),A=(n("96cf"),n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("9861"),n("ac1f"),n("5319"),n("e22b")),V=n("4af8"),q=n("521f"),N=n("0613"),R=Object(a["j"])({name:"Checkout",store:N["a"],components:{CurrentPathBar:A["a"],FormInput:V["a"],MessageBox:q["a"]},data:function(){return{publicPath:"/my_online_shop/",parentPageList:[{name:"Home",path:""},{name:"Cart",path:"cart"}],receiverInfo:{name:"",phone_number:""},paymentMethod:"",address:"",pickupStoreInfo:{address:""},shouldShowMessageBox:!1,statusResponded:"",formInputDisplayType:"inline-block"}},computed:{fullPathList:function(){return this.parentPageList.concat([{name:"Checkout",path:"#"}])},userInfo:function(){return N["a"].state.userInfo},canSubmitWithoutPaying:function(){return"Cash On Delivery"===this.paymentMethod&&""!==this.pickupStoreInfo.address},canSubmitAndPay:function(){return"Home Delivery"===this.paymentMethod&&""!==this.address||"In-store Pickup"===this.paymentMethod&&""!==this.pickupStoreInfo.address}},methods:{checkCanCheckout:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(N["a"].state.backendApiUrl,"/order"),{method:"get",credentials:"include"}).then((function(e){return e.status}));case 2:n=t.sent,404!==n&&500!==n||e.$router.push({name:"Error",params:{statusCode:n}});case 4:case"end":return t.stop()}}),t)})))()},syncInfo:function(){this.receiverInfo={name:this.userInfo.name,phone_number:this.userInfo.phone_number}},setStoreInfo:function(e){this.pickupStoreInfo.address=e},clearFormerSelection:function(){this.pickupStoreInfo.address=""},submit:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var n,a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new URLSearchParams,n.append("operation","create"),e.receiverInfo.name&&n.append("name_of_picker",e.receiverInfo.name),e.receiverInfo.phone_number&&n.append("phone_number_of_picker",e.receiverInfo.phone_number),e.paymentMethod&&n.append("payment_method",e.paymentMethod),a="Home Delivery"===e.paymentMethod?e.address:e.pickupStoreInfo.address,a&&n.append("address",a),t.next=9,fetch("".concat(N["a"].state.backendApiUrl,"/order"),{method:"post",body:n,credentials:"include"}).then((function(e){return e}));case 9:if(i=t.sent,404!==i.status&&500!==i.status){t.next=14;break}e.$router.push({name:"Error",params:{statusCode:i.status}}),t.next=18;break;case 14:return t.next=16,i.json();case 16:r=t.sent["status"],"succeeded"===r?window.location.replace("".concat(e.publicPath,"thank-you")):setTimeout((function(){e.statusResponded=r,e.shouldShowMessageBox=!0,setTimeout((function(){e.shouldShowMessageBox=!1}),1500)}),100);case 18:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkCanCheckout();case 2:case"end":return t.stop()}}),t)})))()},beforeRouteUpdate:function(e,t){var n=this;return Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.checkCanCheckout();case 2:case"end":return e.stop()}}),e)})))()}}),B=(n("aa74"),n("6b0d")),L=n.n(B);const X=L()(R,[["render",M],["__scopeId","data-v-117a12ed"]]);t["default"]=X},"899a":function(e,t,n){},aa74:function(e,t,n){"use strict";n("d1cf")},ba10:function(e,t,n){"use strict";n("5062")},d1cf:function(e,t,n){},e22b:function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),i={id:"current-path-bar"},r=["href"],s={key:0,class:"slash"};function c(e,t,n,c,o,u){return Object(a["t"])(),Object(a["f"])("div",i,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(e.parentPageList,(function(t){return Object(a["t"])(),Object(a["f"])("div",{class:"part-of-path",key:t.name},[Object(a["g"])("a",{class:"path-name",href:e.publicPath+t.path},Object(a["D"])(t.name),9,r),t.name!==e.parentPageList[e.parentPageList.length-1].name?(Object(a["t"])(),Object(a["f"])("span",s," / ")):Object(a["e"])("",!0)])})),128))])}var o=Object(a["j"])({props:{parentPageList:{type:Array,required:!0}},data:function(){return{publicPath:"/my_online_shop/"}}}),u=(n("4ea3"),n("6b0d")),p=n.n(u);const l=p()(o,[["render",c],["__scopeId","data-v-65f2ec09"]]);t["a"]=l}}]);
//# sourceMappingURL=chunk-8b5790c0.50db94b2.js.map